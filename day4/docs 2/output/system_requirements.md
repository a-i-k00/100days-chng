# システム要件定義書

## システム概要

「シティイベントカレンダー」は、地域コミュニティの活性化と住民の生活の質向上を目的とした、地域イベント特化型のカレンダーアプリケーションです。従来分散していた地域イベント情報を一元管理し、視覚的なカレンダー形式で提供することで、住民が地域活動に容易にアクセスできる環境を実現します。地域イベント、文化、健康、教育などの多様なカテゴリーを色分けして表示し、簡単な検索・共有機能、外部カレンダーとの連携機能を備え、世代を問わず誰もが使いやすいシンプルなUIを提供します。イベント主催者にとっては効果的な告知手段となり、自治体や地域団体との連携により公共サービスとしての価値も持ちます。地域データの蓄積と分析を通じて、コミュニティの絆を深め、地域活性化に貢献する「地域の公共インフラ」を目指します。

### 1. システムの目的
   - 分散している地域イベント情報を一元管理し、住民の情報アクセス性を向上させる
   - 地域コミュニティの活性化と住民同士の絆を深める機会を創出する
   - イベント主催者と参加者のコミュニケーションを促進し、地域活動の持続可能性を高める
   - 高齢者を含む多様な世代のデジタルデバイド解消に貢献する

### 2. 主な機能
   - **コア機能**: カテゴリー別カレンダー表示、イベント詳細管理、検索・フィルタリング機能
   - **差別化機能**: イベント共有用リンク生成、Google Calendarへの連携機能、多世代対応のシンプルUI
   - **付加価値機能**: イベント参加フィードバック機能、地域データ分析レポート

### 3. 提供する価値
   - **ユーザー**: 地域イベント情報の簡単な発見と共有、コミュニティとの繋がり強化、新たな地域活動への参加機会の創出
   - **ビジネス**: イベント主催者の集客力向上、自治体の地域活性化施策との連携、地域データの蓄積と活用
   - **社会的価値**: 地域コミュニティの活性化、多世代交流の促進、高齢者のデジタルデバイド解消への貢献

### 4. 実現方法の概要
   - **主要テクノロジー**: Webアプリケーション（モバイルレスポンシブ）、クラウドベースのデータベース
   - **重要インテグレーション**: Google Calendar API、地域自治体システム、SNS共有機能
   - **スケーラビリティ**: 地域ごとのカスタマイズ可能な構造、複数地域への横展開を前提とした設計

## 情報の前提と仮定

分析には以下の情報源を使用しました：
- `7Powes_service.docx.md`: サービスの競争優位性分析
- `Service-leancanvas.docx.md`: ビジネスモデルキャンバス
- `Service-design_concept.docx.md`: デザインコンセプト

以下の仮定を置いています：
- 初期導入地域は中規模都市（人口10万人程度）を想定
- ユーザーの大半がスマートフォンを所有していると仮定
- 自治体・地域団体との協力体制が構築可能と仮定
- 主なユーザー層は20〜60代と幅広いが、特に40〜60代の地域活動に関心の高い層がコアユーザーとなると想定

## 機能要件

### 1. イベントカレンダー表示機能
- 月・週・日表示の切り替え可能なカレンダーインターフェース
- カテゴリー別（地域イベント、文化、健康、教育）の色分け表示
- 開催中のイベントと今後のイベントの視覚的区分け
- カレンダーの印刷・PDFエクスポート機能

### 2. イベント管理機能
- イベント詳細情報（名称、日時、場所、主催者、説明、カテゴリー、連絡先）の登録・編集
- イベント画像・ポスターのアップロード機能
- イベントの下書き保存と公開スケジュール設定
- 定期イベントの繰り返し設定機能
- イベント開催場所のマップ表示（地図連携）

### 3. 検索・フィルタリング機能
- キーワード検索によるイベント絞り込み
- カテゴリー/日付/場所/主催者別フィルタリング
- 「お気に入り」イベントの登録と管理
- 「近日開催」「人気イベント」などのクイックビュー

### 4. 共有・通知機能
- イベント詳細の共有用リンク生成
- SNS・メッセージアプリとの共有連携
- Google Calendarへのイベント追加機能
- イベント更新・中止の通知機能
- リマインダー設定機能

### 5. ユーザー管理機能
- 簡易ログイン機能（メールアドレスのみ、SNS連携も可）
- ユーザープロフィール設定（興味のあるカテゴリー、地域設定）
- イベント参加履歴の管理
- プライバシー設定（参加履歴の公開範囲など）

### 6. イベント主催者向け機能
- イベント登録・管理ダッシュボード
- イベント参加予定者数の表示
- 過去イベントの参加状況分析
- 参加者向けアンケート機能（プレミアム機能）
- イベント告知テンプレート生成

### 7. 管理者機能
- イベント承認ワークフロー
- ユーザー・主催者管理
- 不適切コンテンツの報告・管理機能
- システム利用統計ダッシュボード
- データバックアップ・エクスポート機能

## 非機能要件

### 1. パフォーマンス要件
- ページ読み込み時間：3秒以内（モバイル回線環境下）
- 同時接続ユーザー：最大3,000人（地域イベント開催時のピーク時）
- レスポンスタイム：API応答は500ms以内
- 初期フェーズでは月間10万PV程度を想定

### 2. セキュリティ要件
- ユーザーデータの暗号化保存
- HTTPS通信の強制
- 個人情報保護法に準拠したプライバシーポリシーの実装
- イベント投稿のモデレーション機能
- アクセス権限の適切な設定と管理

### 3. 可用性要件
- サービス稼働率：99.5%以上（月間4時間以内のダウンタイム許容）
- 計画的メンテナンス時間：月1回、深夜2時間以内
- バックアップ：日次自動バックアップ、7日分保持
- 障害復旧：RTO（目標復旧時間）4時間以内、RPO（目標復旧時点）24時間以内

### 4. スケーラビリティ要件
- 初期10地域から最大100地域への拡張を想定
- ユーザー数：初期5,000人から最大50万人への成長を想定
- イベント登録数：月間500件から5,000件への増加に対応
- データストレージ：年間50GB増加を想定

### 5. ユーザビリティ要件
- 高齢者を含む多様な世代が直感的に操作できるシンプルなUI
- アクセシビリティ対応（WCAG 2.1 AAレベル準拠）
- 文字サイズ変更機能、コントラスト調整機能の実装
- 主要ブラウザ（Chrome, Safari, Firefox, Edge）での動作保証
- 画面サイズ（スマートフォン、タブレット、PC）に応じたレスポンシブデザイン

### 6. 互換性要件
- iOS 14以上、Android 9以上のモバイルOS対応
- 主要ブラウザの最新2バージョンをサポート
- Google Calendarとの双方向同期
- 主要SNS（LINE, Twitter, Facebook）との共有連携

## 技術スタック

### 1. フロントエンド
- **Next.js**: SSRによる高速表示、SEO対応、React Server Componentsによるパフォーマンス最適化
- **TypeScript**: 型安全性の確保、コード品質向上
- **Tailwind CSS**: レスポンシブデザインの効率的実装、カスタマイズ性
- **Shadcn UI / Radix UI**: アクセシビリティに配慮したUIコンポーネント
- **React Query**: データフェッチングの効率化、キャッシュ管理

### 2. バックエンド
- **Node.js**: 開発効率の高さ、エコシステムの充実
- **Express.js**: 軽量で柔軟なAPIサーバー構築
- **Prisma**: 型安全なデータベースアクセス、マイグレーション管理の容易さ
- **PostgreSQL**: 構造化データの信頼性の高い管理、オープンソース

### 3. インフラストラクチャ
- **Vercel**: Next.jsとの親和性、CI/CD自動化、エッジデプロイメント
- **Supabase**: PostgreSQLホスティング、認証機能、ストレージ
- **GitHub**: バージョン管理、コラボレーション
- **GitHub Actions**: CI/CD自動化

### 4. 外部サービス統合
- **Google Calendar API**: カレンダー連携
- **Mapbox API**: 地図表示機能
- **SendGrid**: メール通知
- **Firebase Analytics**: ユーザー行動分析

### 選定理由
- Next.jsとTypeScriptの組み合わせにより、高品質で保守性の高いコードベースを構築可能
- Vercelを活用することで、インフラ管理の負担を最小限に抑えながら高いパフォーマンスを実現
- PrismaとPostgreSQLにより、将来的なデータ規模拡大にも対応可能なスケーラブルなデータ管理基盤を構築
- オープンソースコンポーネントを中心とした構成により、コスト効率の高い開発・運用を実現
- 各コンポーネントのエコシステムが充実しており、開発者確保の容易さや拡張性に優れている

## 開発ロードマップ

### フェーズ1: MVP（最小実行製品）開発（3ヶ月）
- 基本的なカレンダー表示機能の実装
- イベント登録・管理の基本機能実装
- シンプルな検索・フィルタリング機能
- 初期UI/UXデザインの実装
- 1地域でのパイロット運用開始

### フェーズ2: 基本機能強化（2ヶ月）
- Google Calendar連携機能の実装
- 共有リンク生成機能の追加
- ユーザー登録・プロフィール機能の拡充
- フィードバック機能の実装
- 複数地域への拡大（3地域）

### フェーズ3: イベント主催者向け機能強化（2ヶ月）
- イベント主催者向けダッシュボードの強化
- イベント参加者分析機能の追加
- アンケート機能の実装
- 自治体連携機能の開発
- 5地域への拡大

### フェーズ4: エンゲージメント強化（2ヶ月）
- リマインダー・通知機能の実装
- パーソナライズされたイベント推薦機能
- 参加履歴管理と振り返り機能
- コミュニティ機能の拡充
- 10地域への拡大

### フェーズ5: データ分析・最適化（3ヶ月）
- データ分析レポート機能の開発
- パフォーマンス最適化
- アクセシビリティの強化
- 自動化・運用効率化
- 20地域への拡大

### ロードマップ策定の根拠
- MVPを早期にリリースし、実ユーザーからのフィードバックを開発に反映する方針
- 基本機能→主催者向け機能→エンゲージメント機能の順に優先度を設定
- 地域展開は段階的に行い、各段階での課題を解決しながら拡大
- 開発リソースの効率的配分と成長速度のバランスを考慮

## リスク分析

### 1. 技術的リスク
- **データ量増加によるパフォーマンス低下**
  - 対策: スケーラブルなデータベース設計、キャッシュ戦略の導入、早期からのパフォーマンステスト実施
- **外部API（Google Calendar等）の仕様変更**
  - 対策: APIラッパー層の導入、変更検知の仕組み構築、代替手段の検討
- **セキュリティ脆弱性**
  - 対策: 定期的なセキュリティ監査、依存パッケージの更新管理、ペネトレーションテスト実施

### 2. ビジネス的リスク
- **ユーザー獲得・定着の困難さ**
  - 対策: 地域パートナーと連携した導入促進、ユーザーエンゲージメント分析、継続的な機能改善
- **収益モデルの不確実性**
  - 対策: 複数の収益源の並行検証、ユーザーニーズに基づく有料機能の選定、段階的な収益化
- **地域展開の遅延**
  - 対策: 地域展開プロセスの標準化、地域ごとのパートナー確保、展開リソースの適切な配分

### 3. 運用的リスク
- **イベント情報の正確性・鮮度の維持**
  - 対策: 情報更新の自動通知、ユーザー報告システム、定期的な情報検証プロセス
- **高齢者を含む多様なユーザーのサポート負担**
  - 対策: 直感的UIの徹底、ヘルプ機能の充実、地域サポーター制度の導入
- **システム障害による信頼性低下**
  - 対策: 冗長構成、定期的なバックアップ検証、障害対応プロセスの整備

### 4. 法的/コンプライアンスリスク
- **個人情報保護法違反**
  - 対策: プライバシーポリシーの明確化、データ取り扱いプロセスの文書化、定期的なコンプライアンス研修
- **著作権・肖像権などの権利侵害**
  - 対策: イベント情報投稿ガイドラインの策定、モデレーションプロセスの構築、権利者からの申し立て対応フロー整備
- **地域ごとの条例違反**
  - 対策: 地域展開時の法規制調査、自治体との事前協議、必要に応じたローカライズ対応

## 追加情報リクエスト

以下の追加情報が入手できれば、より精度の高いシステム要件定義が可能になります：

### 優先度高
1. 初期ターゲット地域の具体的な規模と特性（人口、年齢構成、インターネット普及率など）
2. 開発・運用予算の規模と制約
3. 開発チームの規模とスキルセット
4. 自治体・地域団体との連携状況（既存の協力関係や接触状況）
5. 競合サービスの具体的な機能・利用状況（地域でのシェア等）

### 優先度中
6. 収益化目標（時期、目標額）と主要な収益源の割合
7. ユーザーが所有する端末・OS・ブラウザの利用傾向
8. 類似システムの導入実績がある地域での成功・失敗事例
9. イベント情報の取得元と更新頻度の目標
10. 想定される地域イベントの種類と年間開催頻度

### 優先度低
11. 長期的なグローバル展開の可能性
12. 他のサービスとの連携・統合の可能性
13. 組織のブランディング方針との整合性
14. マーケティング戦略と予算
15. 将来的な機能拡張の方向性 